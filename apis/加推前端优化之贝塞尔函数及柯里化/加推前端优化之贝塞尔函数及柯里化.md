## åŠ æ¨å‰ç«¯ä¼˜åŒ–ä¹‹è´å¡å°”å‡½æ•°åŠæŸ¯é‡ŒåŒ–

> å·¥ç¨‹å¸ˆæ–‡åŒ–ï¼Œæœ¬è´¨æ˜¯ä¸€ç§ä¸“ç ”ï¼Œææ¸…äº‹ç‰©æœ¬è´¨çš„ç²¾ç¥ ğŸ’¥

### ä»ä¸€æ¬¡æŠ€æœ¯ç¾¤çš„èŠå¤©è¯´èµ·

> å‰ç«¯ Aï¼š

- è¯·é—®æœ‰æ²¡æœ‰ æŠŠä¸€ç»„æ•°å˜å¹³æ»‘çš„ JS ç®—æ³•ï¼ŸğŸ˜”

- æ¯”å¦‚è¯´ [100, 80, 20, 10] è¿™é‡Œ 80 -> 20 æ–­å´–å¼ä¸‹è·Œï¼ŒæŠŠä»–è½¬æ¢æˆç±»ä¼¼ [100, 75, 50, 25 ]è¿™ç§å¹³æ»‘ä¸‹è·Œçš„
- æˆ‘å¸Œæœ›èƒ½ä¼ å‚è°ƒæ•´è¿™ä¸ªå¹³æ»‘åº¦ï¼ˆé¡¹ç›®ç»„äº§å“ï¼‰ğŸ˜¶

> Skyï¼šæœ‰å¾ˆå¤šæ–¹æ³• ğŸ’¥

- æ’å€¼ï¼Œç§»åŠ¨å¹³å‡çº¿ï¼Œè´å¡å°”ï¼Œå¤šé¡¹å¼æ‹Ÿåˆçº¿æ¡

> å‰ç«¯ A

- å…¶å®æ˜¯æƒ³æŠŠæ¼æ–—å›¾å¼„å¹³æ»‘ç‚¹
  ![loudou](loudou.png)

> Sky: å¦‚æœéœ€è¦æœ‰æ§åˆ¶å‚æ•°çš„è¯ï¼Œå»ºè®®ä½¿ç”¨è´å¡å°”
>
> Talk is cheap, show me the codeğŸ”¥

### æœ¬éœ€æ±‚çš„åˆ†æ

- é”€å”®æ¼æ–—å›¾æ¯”è¾ƒé”ï¼Œå¸Œæœ›æœ‰ä¸€ä¸ªæŸ”å’Œçš„å®½åº¦å˜åŒ– ğŸ˜¶
- å¢åŠ æ›´å¤šçš„ç‚¹æ¥æŸ”å’Œ è¿™äº›[100, 80, 20, 10]
- éœ€è¦ä¸€ä¸ªéå¸¸å¿«æ·çš„æ–¹å¼å®ç°ï¼Œå‰ç«¯è¦è€ƒè™‘æ€§èƒ½
- ç±»ä¼¼çš„è§£å†³é—®é¢˜çš„æ–¹æ³•æ˜¯å¦æœ‰ä¸€å®šçš„**å»¶å±•æ€§**ğŸ”¥

> é€šè¿‡æ’å€¼æ–¹å¼å°†[100, 80, 20, 10]æ‰©å±•æˆå¤šä¸ªç‚¹é›†ï¼Œæˆ‘ä»¬é€‰æ‹©è´å¡å°” 3 æ¬¡æ›²çº¿

### è´å¡å°”æ›²çº¿

- 1912 å¹´ä¼¯æ©æ–¯å¦å¤šé¡¹å¼=>åœ¨[ a, b ] åŒºé—´ä¸Šæ‰€æœ‰çš„è¿ç»­å‡½æ•°éƒ½å¯ä»¥ç”¨å¤šé¡¹å¼æ¥é€¼è¿‘ï¼Œå¹¶ä¸”æ”¶æ•›æ€§å¾ˆå¼ºï¼Œä¹Ÿå°±æ˜¯ä¸€è‡´æ”¶æ•›ã€‚ğŸ˜¶

- 1959 å¹´ã€‚å½“æ—¶å°±èŒäºé›ªé“é¾™çš„æ³•å›½æ•°å­¦å®¶ Paul de Casteljau å¼€å§‹å¯¹ä¼¯æ©æ–¯å¦å¤šé¡¹å¼è¿›è¡Œäº†å›¾å½¢åŒ–çš„å°è¯•ã€‚

- é€šè¿‡å¾ˆå°‘çš„æ§åˆ¶ç‚¹ï¼Œå»ç”Ÿæˆå¤æ‚çš„å¹³æ»‘æ›²çº¿ï¼Œä¹Ÿå°±æ˜¯è´å¡å°”æ›²çº¿ã€‚

- 1962 å¹´å°±èŒäºé›·è¯ºçš„æ³•å›½å·¥ç¨‹å¸ˆçš®åŸƒå°”Â·è´å¡å°”ï¼ˆPierre BÃ©zierï¼‰ï¼Œä»–ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥è¾…åŠ©æ±½è½¦çš„è½¦ä½“å·¥ä¸šè®¾è®¡ã€‚åŸæ¥æ˜¯ç ”ç©¶æ±½è½¦çš„çº¿:smile:
- wiki ä¸Šæœ‰æ›´è¯¦ç»†çš„ E æ–‡è§£é‡Š ğŸ’¥

- ##### è´èµ›å°”æ›²çº¿ N é˜¶,å‰ç«¯æŠ€æœ¯ä¸­å¸¸ç”¨çš„æ˜¯ 3 é˜¶ï¼Œå¦‚ä¸‹å›¾

![bezier3](bezier3.webp)

### å®ç°ï¼ˆå¹²è´§ï¼‰ğŸ”¥

![bezierF](bezierF.png)

> ä»¥ä¸Šå…¬å¼å– 3 é˜¶å³å¯,ç›´æ¥ä¸ŠåŠ æ¨ 3 æ¬¡è´å¡å°”ä»£ç ï¼Œå½“ç„¶å‡½æ•°å¯ä»¥è¿›ä¸€æ­¥**æŸ¯é‡ŒåŒ–**

```javascript
const cubicBezier = (t, x = [], y = []) => {
  // t~[0,1]
  return [
    x[0] * (1 - t) ** 3 +
      3 * x[1] * t * (1 - t) ** 2 +
      3 * x[2] * t ** 2 * (1 - t) +
      x[3] * t ** 3,
    y[0] * (1 - t) ** 3 +
      3 * y[1] * t * (1 - t) ** 2 +
      3 * y[2] * t ** 2 * (1 - t) +
      y[3] * t ** 3
  ]
}
let x = [1, 2, 3, 4]
let y = [10, 20, 80, 100]
for (let i = 0; i <= 1; i += 0.1) {
  console.log(cubicBezier(i, x, y))
}
```

- æˆ‘ä»¬å°†åŸå§‹ 4 ä¸ªä¿¡æ¯ç‚¹æ‰©å±•æˆäº† 11 ä¸ªç‚¹
  ![bezier11](bezier11.png)
- x,y è¡¨ç¤º 4 ä¸ªç‚¹çš„ xï¼Œy åæ ‡ï¼Œä»è¿™é‡Œçœ‹ï¼Œä¸€ä¸ª 3 æ¬¡è´å¡å°”è‡³å°‘éœ€è¦ 4 ä¸ªç‚¹æ”¯æŒï¼Œå¤šä½™çš„ç‚¹å¯ä»¥ä½¿ç”¨å…¶ä»–çº¿æ¡
- ç”¨ excel æ£€éªŒä¸€ä¸‹è®¡ç®—çš„ç»“æœ
  ![bezierall](bezierall.png)

* ä»£ç ä¸éš¾ï¼Œ11 ä¸ªç‚¹ä¹Ÿæœ‰äº†ï¼Œä½†å‰ç«¯æœ‰åŒå­¦å¥½åƒè¿˜æ˜¯æ²¡ææ‡‚ ğŸ˜¶

* å†ä¸Šä¸€ä¸ªå›¾
  ![loudouB](loudouB.png)

* è¿™ä¸ªå›¾å‚ç›´åï¼Œå°±æ˜¯é”€å”®æ¼æ–—å›¾å¹³æ»‘æ–¹æ¡ˆ ğŸ”¥

> æˆ‘ä»¬åœ¨é«˜çº§å®‰å“å’Œ iOS é¢è¯•ä¸­ ä¼šé—®åˆ°ç¼“åŠ¨å‡½æ•°å’Œå¹³æ»‘æ›²çº¿ç­‰çŸ¥è¯†ç‚¹ã€‚

### æŸ¯é‡ŒåŒ–

- ç»†å¿ƒçš„åŒå­¦å·²ç»å‘ç° cubicBezier çš„å‚æ•° x,y æ˜¯åˆå§‹åŒ–çš„æ—¶å€™ç¡®å®šçš„ï¼Œä¹‹åä¸»è¦å‚æ•°æ˜¯ t ~ [0,1]
- åœ¨ä¸æ”¹å˜åŸå‡½æ•°çš„æƒ…å†µä¸‹å‡½æ•°åˆ†æ®µæ‰§è¡Œ
- å°†ä¸Šé¢çš„ t å‚æ•°æ”¾åˆ°åé¢ï¼Œå¹¶è¾¾æˆ cubicBezier(x,y,t) => cubicBezier(x,y)(t) çš„å˜æ¢æ•ˆæœ

```javascript
function curry (fn, ...arg1) {
  // æŸ¯é‡ŒåŒ–æ ¸å¿ƒå‡½æ•°
  return function (...arg2) {
    return fn.apply(null, arg1.concat(arg2))
  }
}
function curryExtend (fn, len = 1) {
  // æŸ¯é‡ŒåŒ–é€šç”¨æ‰©å±•
  const length = len
  return function (...arg) {
    return arg.length >= length
      ? fn.apply(this, arg)
      : curryExtend(curry.apply(this, [fn].concat(arg)), length - arg.length)
  }
}

const cubicBezier = (x = [], y = [], t) => {
  // å°†å‚æ•°tæ”¾ç½®æœ€å
  return [
    x[0] * (1 - t) ** 3 +
      3 * x[1] * t * (1 - t) ** 2 +
      3 * x[2] * t ** 2 * (1 - t) +
      x[3] * t ** 3,
    y[0] * (1 - t) ** 3 +
      3 * y[1] * t * (1 - t) ** 2 +
      3 * y[2] * t ** 2 * (1 - t) +
      y[3] * t ** 3
  ]
}
let x = [1, 2, 3, 4]
let y = [10, 20, 80, 100]

let bezierT = curryExtend(cubicBezier, 3)(x, y)
for (let i = 0; i <= 1; i += 0.1) {
  console.log(bezierT(i), cubicBezier(x, y, i))
}
```

![bezierT](bezierT.png)

- bezierT(t)ï¼ŒåŒåŸå‡½æ•°æ•ˆæœå®Œå…¨ä¸€è‡´:smile:

### æœ¬é—®é¢˜çš„å»¶å±•

- æˆ‘ä»¬ä½¿ç”¨ Photoshop ä¸­çš„ é’¢ç¬”ï¼Œå°±æ˜¯ cubicBezier æ›²çº¿:smile:
- åœ¨ CorelDraw ä¸­ç¿»è¯‘æˆâ€œè´èµ›å°”å·¥å…·â€ï¼›è€Œåœ¨ Fireworks ä¸­å«â€œç”»ç¬”â€
- å‰ç«¯åœ¨ä½¿ç”¨ canvas ç»˜åˆ¶æ›²çº¿çš„æ—¶å€™ï¼Œä¹Ÿç”¨åˆ°äº† cubicBezier,è¯´é“è¿™è¾¹å‰ç«¯åŒå­¦ç¬‘äº†:smile:

```
let c=document.getElementById("myCanvas");
let ctx=c.getContext("2d");
ctx.beginPath();
ctx.moveTo(20,20);
ctx.bezierCurveTo(20,100,200,100,200,20);
ctx.stroke();
```

![bezierc](bezierc.png)

- å‰ç«¯åœ¨ css ä¸­ä½¿ç”¨ ease-in ease-out ,cubicBezier å¯ä»¥ ä½œä¸º ç¼“åŠ¨å‡½æ•° çš„å‘ç”Ÿå™¨

- æˆ–è€…è¯´ä»¥ä¸Šè¿™äº›ï¼Œå’Œ cubicBezier å‡½æ•°ä¸€æ¨¡ä¸€æ ·

## å°ç»“

- ä»è´å¡å°”å‡½æ•°ï¼Œåˆ°é€šç”¨æŸ¯é‡ŒåŒ–
- ç ”å‘åŒå­¦ä½¿ç”¨çš„å„ç§è®¡ç®—æœºæŠ€æœ¯ï¼Œéƒ½æ˜¯å‰äººæ½œå¿ƒç ”ç©¶å‡ºæ¥çš„çŸ¥è¯†ç§¯ç´¯ï¼Œæˆ‘ä»¬ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œæ•¬ç•è¿™ä»–ä»¬å¹¶åŠªåŠ›çš„å‰è¿›ã€‚

æˆ‘ä»¬çš„ä»£ç ä¹‹è·¯æ˜¯æ˜Ÿè¾°å¤§æµ·ã€‚ğŸ”¥
